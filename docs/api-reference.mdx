---
title: API Reference
description: Complete API documentation for Vigilo components and hooks
---

# API Reference

This page documents all available components, hooks, and types in the Vigilo packages.

## Core Types

### Pos

Position coordinates for panel placement and freeroam connections.

```ts
type Pos = {
  x: number
  y: number
}
```

### TodoStatus

Status enumeration for tasks.

```ts
type TodoStatus = 'todo' | 'working' | 'done'
```

### TodoItem

Individual task within a category.

```ts
type TodoItem = {
  text: string                           // Main task text (required)
  action?: string                        // Short label: 'fix', 'feat', 'perf', etc.
  info?: string                          // Short info text
  description?: string                   // Longer description
  notes?: string                         // Additional notes
  priority?: 'low' | 'medium' | 'high'   // Priority level
  tags?: string[]                        // Tags for filtering
  createdAt?: string                     // ISO 8601 timestamp
  updatedAt?: string                     // ISO 8601 timestamp
}
```

### Connection

Links a task to a DOM element or absolute position.

```ts
type Connection = {
  todoIndex: number           // 0-based task index
  targetSelector?: string     // CSS selector (mutually exclusive with targetPosition)
  targetLabel?: string        // Display label for the connection
  targetPosition?: Pos        // Fixed x/y coordinates for "freeroam" connections
}
```

### DisplayMode

Panel display modes.

```ts
type DisplayMode = 'full' | 'compact' | 'minimal'
```

### CategoryConfig

Configuration for task categories.

```ts
type CategoryConfig = {
  id: string                  // Unique category identifier
  displayName?: string        // Human-readable name (falls back to id)
  items: TodoItem[]           // Array of tasks
}
```

### Theme

Theme configuration object.

```ts
interface Theme {
  colors: {
    primary: string       // Accent color for lines and highlights
    primaryDim: string    // Dimmed primary for backgrounds
    freeroam: string      // Freeroam connection color
    textMain: string      // Main text (Tailwind class or CSS)
    textDim: string       // Secondary text
    bgPanel: string       // Panel background
    borderPanel: string   // Panel border
    bgOverlay: string     // Overlay background
  }
  layout: {
    panel: string         // Panel CSS classes
    item: string          // Item CSS classes
    header: string        // Header CSS classes
    badge: string         // Badge CSS classes
  }
  z: {
    lines: number         // z-index for connector lines (default: 9990)
    overlay: number       // z-index for overlay (default: 9995)
    panel: number         // z-index for panel (default: 9999)
  }
}
```

## React Components

### Vigilo

Main component for task awareness overlay.

```tsx
import { Vigilo } from 'btwfyi/react'

interface VigiloProps<TCategories extends readonly CategoryConfig[]> {
  category: string                         // Category ID to display (required)
  categories: TCategories                  // Array of all categories (required)
  instanceId?: string                      // Unique instance ID (defaults to category)
  enabled?: boolean                        // Enable/disable component (default: true)
  storage?: VigiloStorage                  // Custom storage adapter
  themeOverrides?: ThemeOverrides          // Theme customization
  stylesOverrides?: Partial<Styles>        // Style customization
  colorMode?: 'light' | 'dark'             // Color mode
}
```

### VigiloCommandPalette

Global command palette component.

```tsx
import { VigiloCommandPalette } from 'btwfyi/react'

interface VigiloCommandPaletteProps {
  shortcutKey?: string | null              // Default: 'k'
  shortcutModifier?: 'alt' | 'ctrl' | 'meta' | 'shift'  // Default: 'alt'
  disableShortcut?: boolean                // Default: false
}
```

## React Hooks

### useVigiloInstance

Hook for programmatic control of Vigilo instances.

```tsx
import { useVigiloInstance } from 'btwfyi/react'

interface UseVigiloInstanceOptions {
  instanceId: string        // Must match Vigilo category/instanceId
  lineColor?: string        // Optional line color override
}

interface UseVigiloInstanceReturn {
  store: VigiloStore | null
  getState: () => VigiloState | null
  addConnection: (todoIndex: number, target: string | Element | Pos, label?: string) => void
  removeConnection: (todoIndex: number) => void
  setConnections: (connections: Connection[]) => void
  getConnections: () => Connection[]
}

// Usage
const { addConnection, removeConnection, setConnections } = useVigiloInstance({
  instanceId: 'development'
})

// Connect task 0 to a CSS selector
addConnection(0, '#my-button')

// Connect task 1 to a DOM element
addConnection(1, document.querySelector('.sidebar'), 'Sidebar')

// Connect task 2 to fixed coordinates
addConnection(2, { x: 500, y: 300 })

// Set all connections at once
setConnections([
  { todoIndex: 0, targetSelector: '#header' },
  { todoIndex: 1, targetSelector: '.nav' },
])
```

## Vue Components

### Vigilo

Main Vue component with same props as React version.

```vue
<script setup lang="ts">
import { Vigilo } from 'btwfyi-vue'

interface Props {
  category: string
  instanceId?: string
  categories: CategoryConfig[]
  themeOverrides?: ThemeOverrides
  stylesOverrides?: Styles
  colorMode?: 'light' | 'dark'
}
</script>
```

## Constants

### MAX_VISIBLE_ITEMS

Maximum number of items displayed in panel (before "show more").

```ts
export const MAX_VISIBLE_ITEMS = 3
```

### UNDO_WINDOW_MS

Time window for undo functionality (in milliseconds).

```ts
export const UNDO_WINDOW_MS = 8000
```

## Core Functions

### createVigiloStore

Factory function for creating Vigilo store instances.

```ts
import { createVigiloStore } from 'btwfyi'

function createVigiloStore(
  instanceKey: string,
  options?: { storage?: VigiloStorage; overrides?: Partial<VigiloState> }
): VigiloStore
```

### createStorageKeys

Creates namespaced storage keys for localStorage persistence.

```ts
import { createStorageKeys } from 'btwfyi'

function createStorageKeys(instanceKey: string): StorageKeys
```

## Styling API

### Runtime Style Changes

The store exposes methods for runtime styling:

```ts
const { store } = useVigiloInstance({ instanceId: 'dev' })

// Adjust line opacity (0 to 1)
store?.setLineOpacity(0.3)

// Adjust component opacity (0.1 to 1)
store?.setComponentOpacity(0.8)

// Change line color
store?.setLineColor('#ff6b6b')

// Toggle features
store?.setShowLines(false)
store?.setShowBadges(false)
```

### Styles Override Structure

```ts
interface Styles {
  panel: string       // CSS classes for main panel
  item: string        // CSS classes for items
  header: string      // CSS classes for header
  badge: string       // CSS classes for badges
  connectorDot: {
    fill: string      // Dot color
    r: number         // Dot radius
  }
  freeroamDot: {
    fill: string
    stroke: string
    strokeWidth: number
    r: number
    opacity: number
  }
}
```

## Examples

See the [Getting Started](/getting-started) guide for practical usage examples.
