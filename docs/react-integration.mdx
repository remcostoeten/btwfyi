---
title: React Integration
description: How to integrate Vigilo in React applications
---

# React Integration

Vigilo provides React components with hooks-based state management for task awareness.

## Installation

```bash
pnpm add btwfyi
```

## Basic Usage

```tsx
import { Vigilo } from 'btwfyi/react'
import type { CategoryConfig } from 'btwfyi'

const categories: CategoryConfig[] = [
  {
    id: 'backend',
    displayName: 'Backend Tasks',
    items: [
      { text: 'Fix user authentication bug', action: 'fix', priority: 'high' },
      { text: 'Add API rate limiting', action: 'feat', priority: 'medium' },
      { text: 'Implement password reset', action: 'feat', priority: 'low' },
    ],
  },
  {
    id: 'frontend',
    displayName: 'Frontend Tasks',
    items: [
      { text: 'Update dashboard layout', action: 'feat', priority: 'high' },
      { text: 'Add dark mode support', action: 'feat', priority: 'medium' },
      { text: 'Fix responsive bugs', action: 'fix', priority: 'low' },
    ],
  },
]

function App() {
  return (
    <div>
      <Vigilo
        category="backend"
        instanceId="main-backend"
        categories={categories}
      />
      <Vigilo
        category="frontend"
        instanceId="main-frontend"
        categories={categories}
      />
    </div>
  )
}
```

## Easy Styling

### Via Props (Recommended)

```tsx
<Vigilo
  category="development"
  categories={categories}
  themeOverrides={{
    colors: {
      primary: '#10b981',                    // Green accent
      primaryDim: 'rgba(16, 185, 129, 0.1)',
      freeroam: '#8b5cf6',                   // Purple for freeroam
      textMain: 'text-white',
      textDim: 'text-gray-400',
      bgPanel: 'bg-gray-900/90',             // Semi-transparent
      borderPanel: 'border-gray-700',
    },
  }}
  stylesOverrides={{
    connectorDot: { fill: '#10b981', r: 5 },
    freeroamDot: { fill: '#8b5cf6', r: 4, opacity: 0.8 },
  }}
/>
```

### Via Settings Panel (Runtime)

Press **'s'** while focused on Vigilo to open settings:
- **Line Opacity**: Slider 0-100%
- **Component Opacity**: Slider 10-100%
- **Line Color**: Color picker
- **Show Lines**: Toggle on/off
- **Show Badges**: Toggle on/off
- **Display Mode**: Full / Compact / Minimal

### Programmatic Runtime Styling

```tsx
import { useVigiloInstance } from 'btwfyi/react'

function StyleController() {
  const { store } = useVigiloInstance({ instanceId: 'development' })

  const makeSubtle = () => {
    store?.setLineOpacity(0.3)
    store?.setComponentOpacity(0.7)
  }

  const makeVisible = () => {
    store?.setLineOpacity(0.8)
    store?.setComponentOpacity(1)
  }

  return (
    <div>
      <button onClick={makeSubtle}>Subtle Mode</button>
      <button onClick={makeVisible}>Visible Mode</button>
    </div>
  )
}
```

## Programmatic Connections

```tsx
import { useVigiloInstance } from 'btwfyi/react'

function ConnectionManager() {
  const { addConnection, removeConnection, setConnections } = useVigiloInstance({
    instanceId: 'development'
  })

  // Connect task 0 to a CSS selector
  const connectToHeader = () => addConnection(0, '#header', 'Header')

  // Connect task 1 to a DOM element
  const connectToSidebar = () => {
    const el = document.querySelector('.sidebar')
    if (el) addConnection(1, el, 'Sidebar')
  }

  // Connect task 2 to fixed coordinates (freeroam)
  const connectToPosition = () => addConnection(2, { x: 500, y: 300 })

  // Set all connections at once (for AI automation)
  const setAllConnections = () => {
    setConnections([
      { todoIndex: 0, targetSelector: '#login-form', targetLabel: 'Login' },
      { todoIndex: 1, targetSelector: '.dashboard', targetLabel: 'Dashboard' },
      { todoIndex: 2, targetPosition: { x: 800, y: 400 } },
    ])
  }

  return (
    <div>
      <button onClick={connectToHeader}>Connect to Header</button>
      <button onClick={connectToSidebar}>Connect to Sidebar</button>
      <button onClick={() => removeConnection(0)}>Remove Connection</button>
    </div>
  )
}
```

## TypeScript Support

Full TypeScript definitions are included:

```tsx
import { Vigilo, useVigiloInstance } from 'btwfyi/react'
import type { 
  CategoryConfig, 
  TodoItem,
  Connection,
  VigiloStorage 
} from 'btwfyi' // core types at root
import type { 
  VigiloProps,
  ThemeOverrides 
} from 'btwfyi/react'

const categories: CategoryConfig[] = [
  {
    id: 'api',
    displayName: 'API Development',
    items: [
      {
        text: 'Implement authentication endpoint',
        action: 'feat',
        priority: 'high',
        tags: ['auth', 'api'],
      },
    ],
  },
]
```

## Best Practices

### 1. Use Unique Instance IDs

```tsx
// Good: Unique identifiers prevent conflicts
<Vigilo category="api" instanceId="user-service" categories={categories} />
<Vigilo category="web" instanceId="frontend-ui" categories={categories} />

// Avoid: Same instanceId for different contexts will share state
<Vigilo category="tasks" instanceId="main" categories={categories} />
<Vigilo category="tasks" instanceId="main" categories={categories} />
```

### 2. Only Show in Development

```tsx
<Vigilo
  category="development"
  categories={categories}
  enabled={process.env.NODE_ENV === 'development'}
/>
```

### 3. Handle Async Categories

```tsx
function App() {
  const [categories, setCategories] = useState<CategoryConfig[] | null>(null)

  useEffect(() => {
    fetch('/api/tasks')
      .then(res => res.json())
      .then(data => setCategories(data.categories))
  }, [])

  if (!categories) return null

  return <Vigilo category="development" categories={categories} />
}
```
